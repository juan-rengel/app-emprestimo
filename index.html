<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Controle de Empréstimos Diários</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="styles.css" />
  <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body id="app-page">
  <header class="app-header">
    <div class="logo">Controle de Empréstimos Diários</div>
    <div class="user-actions">
      <span id="current-user-email"></span>
      <button id="logout-btn" class="btn small outline">Sair</button>
    </div>
  </header>

  <div class="app-layout">
    <!-- Menu lateral -->
   <!-- Botão mobile -->
<div id="menu-toggle" class="menu-toggle">
  <i data-lucide="menu"></i>
</div>

<nav class="sidebar" id="sidebar">
  <div class="sidebar-title">
    <i data-lucide="layout-dashboard"></i>
    Menu
  </div>

  <button class="nav-link" data-section="dashboard">
    <i data-lucide="gauge"></i> Dashboard
  </button>

  <button class="nav-link" data-section="clientes">
    <i data-lucide="users"></i> Clientes
  </button>

  <button class="nav-link" data-section="emprestimos">
    <i data-lucide="wallet"></i> Empréstimos
  </button>

  <button class="nav-link" data-section="pagamentos">
    <i data-lucide="badge-dollar-sign"></i> Pagamentos
  </button>

  <button class="nav-link" data-section="relatorios">
    <i data-lucide="bar-chart-3"></i> Relatórios
  </button>
</nav>


    <!-- Conteúdo principal -->
    <main class="main-content">
      <!-- ALERTA GLOBAL -->
      <div id="global-alert" class="alert" style="display:none;"></div>

      <!-- DASHBOARD -->
        <section id="section-dashboard" class="section active">
  <h2>Dashboard</h2>

  <div class="cards-grid">

    <!-- Total emprestado -->
    <div class="card">
      <div class="card-icon"><i data-lucide="wallet"></i></div>
      <div class="card-content">
        <h3>Total emprestado (ativos)</h3>
        <p id="dash-total-emprestado" class="card-value">R$ 0,00</p>
      </div>
    </div>

    <!-- Total a receber hoje -->
    <div class="card">
      <div class="card-icon"><i data-lucide="calendar-clock"></i></div>
      <div class="card-content">
        <h3>Total a receber hoje</h3>
        <p id="dash-total-receber-hoje" class="card-value">R$ 0,00</p>
      </div>
    </div>

    <!-- Total recebido hoje -->
    <div class="card">
      <div class="card-icon"><i data-lucide="badge-dollar-sign"></i></div>
      <div class="card-content">
        <h3>Total recebido hoje</h3>
        <p id="dash-total-recebido-hoje" class="card-value">R$ 0,00</p>
      </div>
    </div>

    <!-- Contagem de empréstimos -->
    <div class="card">
      <div class="card-icon"><i data-lucide="list-checks"></i></div>
      <div class="card-content">
        <h3>Empréstimos (A / At / Q)</h3>
        <p id="dash-contagem-emprestimos" class="card-value">0 / 0 / 0</p>
      </div>
    </div>

  </div>

  <div class="two-columns" style="margin-top: 30px;">

    <!-- Vencimentos de hoje -->
    <div>
      <h3>Vencimentos de hoje</h3>
      <table>
        <thead>
          <tr>
            <th>Cliente</th>
            <th>Empréstimo</th>
            <th>Valor parcela</th>
          </tr>
        </thead>
        <tbody id="dash-vencimentos-hoje">
          <tr><td colspan="3">Nenhum vencimento hoje.</td></tr>
        </tbody>
      </table>
    </div>

    <!-- Empréstimos atrasados -->
    <div>
      <h3>Empréstimos atrasados</h3>
      <table>
        <thead>
          <tr>
            <th>Cliente</th>
            <th>Saldo</th>
            <th>Início</th>
          </tr>
        </thead>
        <tbody id="dash-atrasados">
          <tr><td colspan="3">Nenhum empréstimo atrasado.</td></tr>
        </tbody>
      </table>
    </div>

  </div>
</section>


      <!-- CLIENTES -->
      <section id="section-clientes" class="section">
  

  <div class="toolbar">
    <input type="text" id="filtro-clientes" placeholder="Filtrar por nome..." />
  </div>

  <div class="two-columns">

    <!-- CARD DO FORMULÁRIO DE CLIENTE -->
   <div class="card card-premium">

  <form id="cliente-form" class="card-body">

<div class="card-header-fixed">
    <div class="card-icon"><i data-lucide="user-plus"></i></div>
    <h3>Cadastrar / Editar Cliente</h3>
  </div>

    <input type="hidden" id="cliente-id" />

    <label>Nome completo</label>
    <input type="text" id="cliente-nome" required />

    <label>CPF / Documento</label>
    <input type="text" id="cliente-doc" />

    <label>Telefone / WhatsApp</label>
    <input type="text" id="cliente-telefone" />

    <label>Endereço</label>
    <input type="text" id="cliente-endereco" />

    <label>Observações</label>
    <textarea id="cliente-observacoes"></textarea>

    <div class="form-actions">
      <button type="submit" class="btn primary">Salvar</button>
      <button type="button" id="cliente-reset-btn" class="btn outline">Limpar</button>
    </div>
  </form>

</div>


    <!-- CARD DA LISTA DE CLIENTES -->
    <div class="card card-body">
<div class="card-header">
        <div class="card-icon"><i data-lucide="users"></i></div>
        <h3>Lista de Clientes</h3>
      </div>
      <table>

        <thead>
          <tr>
            <th>Nome</th>
            <th>Telefone</th>
            <th>Ações</th>
          </tr>
        </thead>
        <tbody id="clientes-tabela">
          <tr><td colspan="3">Nenhum cliente cadastrado.</td></tr>
        </tbody>
      </table>
    </div>

  </div>
</section>


      <!-- EMPRÉSTIMOS -->
    <section id="section-emprestimos" class="section">
  <div class="card-header-fixed">
        <div class="card-icon"><i data-lucide="wallet"></i></div>
        <h3>Novo Empréstimo</h3>
      </div>

  <div class="toolbar">
    <label>Selecione o cliente:</label>
    <select id="emprestimo-cliente-select"></select>
  </div>
 
  <div class="two-columns">

    <!-- CARD DO FORMULÁRIO DE EMPRÉSTIMO -->
    <div class="card card-premium">

     

      <form id="emprestimo-form" class="card-body">
        
        <input type="hidden" id="emprestimo-id" />

        <label>Valor emprestado (principal)</label>
        <input type="number" id="emprestimo-principal" step="0.01" required />

        <label>Data do empréstimo</label>
        <input type="date" id="emprestimo-data" required />

        <label>Tipo de juros diário</label>
        <select id="emprestimo-tipo-juros">
          <option value="percentual">Percentual (%)</option>
          <option value="fixo">Valor fixo diário (R$)</option>
        </select>

        <label>Taxa diária</label>
        <input type="number" id="emprestimo-juros" step="0.01" required />

        <label>Número de dias / parcelas</label>
        <input type="number" id="emprestimo-dias" required />

        <label>Valor da parcela diária</label>
        <input type="number" id="emprestimo-parcela" step="0.01" readonly />

        <label>Status</label>
        <select id="emprestimo-status">
          <option value="ativo">Ativo</option>
          <option value="atrasado">Atrasado</option>
          <option value="quitado">Quitado</option>
        </select>

        <label>Observações</label>
        <textarea id="emprestimo-observacoes"></textarea>

        <div class="form-actions">
          <button type="button" id="emprestimo-calcular-btn" class="btn outline">Calcular parcelas</button>
          <button type="submit" class="btn primary">Salvar empréstimo</button>
        </div>

      </form>

    </div>

    <!-- CARD DA LISTA DE EMPRÉSTIMOS -->
    <div class="card card-premium">


      <div class="card-body">
         <div class="card-header-fixed">
        <div class="card-icon"><i data-lucide="list"></i></div>
        <h3>Empréstimos do Cliente</h3>
      </div>
        <table>
          <thead>
            <tr>
              <th>Início</th>
              <th>Principal</th>
              <th>Saldo</th>
              <th>Status</th>
              <th>Ações</th>
            </tr>
          </thead>
          <tbody id="emprestimos-tabela">
            <tr><td colspan="5">Selecione um cliente para ver os empréstimos.</td></tr>
          </tbody>
        </table>
      </div>

    </div>

  </div>
</section>




      <!-- PAGAMENTOS -->
    <section id="section-pagamentos" class="section">

  <div class="two-columns">



    <!-- CARD DO FORM DE PAGAMENTO -->
    <div class="card card-premium">

      <form id="pagamento-form" class="card-body">

<div class="card-header-fixed">
        <div class="card-icon"><i data-lucide="badge-dollar-sign"></i></div>
        <h3>Registrar Pagamento Diário</h3>
      </div>

        <label>Cliente</label>
        <select id="pagamento-cliente-select" required></select>

        <label>Empréstimo</label>
        <select id="pagamento-emprestimo-select" required></select>

        <label>Data do pagamento</label>
        <input type="date" id="pagamento-data" required />

        <label>Valor pago</label>
        <input type="number" id="pagamento-valor" step="0.01" required />

        <label>Observações</label>
        <textarea id="pagamento-observacoes"></textarea>

        <div class="form-actions">
          <button type="submit" class="btn primary">Registrar pagamento</button>
        </div>

      </form>

    </div>

    <!-- CARD DO HISTÓRICO DE PAGAMENTOS -->
    <div class="card card-premium">

    

      <div class="card-body">

        <div class="card-header-fixed">
        <div class="card-icon"><i data-lucide="history"></i></div>
        <h3>Histórico de Pagamentos</h3>
      </div>
        <table>
          <thead>
            <tr>
              <th>Data</th>
              <th>Valor</th>
              <th>Observações</th>
            </tr>
          </thead>
          <tbody id="pagamentos-tabela">
            <tr><td colspan="3">Selecione um empréstimo para ver o histórico.</td></tr>
          </tbody>
        </table>
      </div>

    </div>

  </div>
</section>


      <!-- RELATÓRIOS -->
<section id="section-relatorios" class="section">
  <h2>Relatórios</h2>

  <!-- ===== RELATÓRIO POR PERÍODO ===== -->
  <div class="card card-premium">

  

    <div class="card-body">

    <div class="card-header-fixed">
      <div class="card-icon"><i data-lucide="calendar-range"></i></div>
      <h3>Relatório por Período</h3>
    </div>

      <form id="relatorio-periodo-form" class="inline-form">
        <div class="form-row">
          <label>De</label>
          <input type="date" id="relatorio-data-inicio" required />
        </div>

        <div class="form-row">
          <label>Até</label>
          <input type="date" id="relatorio-data-fim" required />
        </div>

        <button type="submit" class="btn primary">Gerar</button>
      </form>

      <!-- RESULTADOS SEMPRE ABAIXO DO FORM -->
      <div class="reports-grid">
        <div class="report-box">
          <h4>Total emprestado no período</h4>
          <p id="rel-total-emprestado">R$ 0,00</p>
        </div>

        <div class="report-box">
          <h4>Total recebido no período</h4>
          <p id="rel-total-recebido">R$ 0,00</p>
        </div>

        <div class="report-box">
          <h4>Lucro aproximado</h4>
          <p id="rel-lucro">R$ 0,00</p>
        </div>
      </div>

    </div>

  </div>

  <!-- ===== RELATÓRIO POR CLIENTE ===== -->
 
  <div class="card card-premium">

    <div class="card-body">
   <div class="card-header-fixed">
      <div class="card-icon"><i data-lucide="user"></i></div>
      <h3>Relatório por Cliente</h3>
    </div>


      <div class="inline-form">
        <div class="form-row">
          <label>Cliente</label>
          <select id="relatorio-cliente-select"></select>
        </div>

        <button id="relatorio-cliente-btn" class="btn secondary">Gerar</button>
      </div>

      <div class="reports-grid">
        <div class="report-box">
          <h4>Total emprestado</h4>
          <p id="rel-cli-total-emprestado">R$ 0,00</p>
        </div>

        <div class="report-box">
          <h4>Total recebido</h4>
          <p id="rel-cli-total-recebido">R$ 0,00</p>
        </div>

        <div class="report-box">
          <h4>Saldo atual</h4>
          <p id="rel-cli-saldo">R$ 0,00</p>
        </div>
      </div>

    </div>

  </div>

</section>






    </main>
  </div>

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

  <!-- Configuração do Firebase e lógica -->
  <script src="firebase-config.js"></script>
  <script src="app.js"></script>
  <script>
  lucide.createIcons();
</script>
<script>
  lucide.createIcons();

  const sidebar = document.getElementById("sidebar");
  const toggle = document.getElementById("menu-toggle");

  toggle.addEventListener("click", () => {
    sidebar.classList.toggle("open");
  });

  // Fecha menu ao clicar em um item (mobile)
  document.querySelectorAll(".nav-link").forEach(link => {
    link.addEventListener("click", () => {
      if (window.innerWidth <= 900) {
        sidebar.classList.remove("open");
      }
    });
  });
</script>

</body>
</html>
